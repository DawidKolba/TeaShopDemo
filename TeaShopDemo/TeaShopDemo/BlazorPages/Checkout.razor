@page "/checkout"
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.AspNetCore.Components.Forms
@using TeaShopDemo.Models
@inject NavigationManager NavigationManager

<div class="container">
    <h3>Checkout - Demo Version</h3>
    <p class="alert alert-warning">This is a demo version of the checkout process. No actual orders will be processed.</p>

    <EditForm Model="@orderInfo" OnValidSubmit="HandleCheckout">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <!-- Full Name -->
        <div class="mb-3">
            <label for="fullName" class="form-label">Full Name</label>
            <InputText id="fullName" class="form-control" @bind="orderInfo.FullName" />
            <span class="text-danger" asp-validation-for="checkoutInfo.FullName"></span>
        </div>

        <!-- Address Line 1 -->
        <div class="mb-3">
            <label for="address1" class="form-label">Address Line 1</label>
            <InputText id="address1" class="form-control" @bind="orderInfo.AddressLine1" />
            <span class="text-danger" asp-validation-for="checkoutInfo.AddressLine1"></span>
        </div>

        <!-- Address Line 2 -->
        <div class="mb-3">
            <label for="address2" class="form-label">Address Line 2 (Optional)</label>
            <InputText id="address2" class="form-control" @bind="orderInfo.AddressLine2" />
        </div>

        <!-- City -->
        <div class="mb-3">
            <label for="city" class="form-label">City</label>
            <InputText id="city" class="form-control" @bind="checkoutInfo.City" />
            <span class="text-danger" asp-validation-for="orderInfo.City"></span>
        </div>

        <!-- Postal Code -->
        <div class="mb-3">
            <label for="postalCode" class="form-label">Postal Code</label>
            <InputText id="postalCode" class="form-control" @bind="checkoutInfo.PostalCode" />
            <span class="text-danger" asp-validation-for="orderInfo.PostalCode"></span>
        </div>

        <!-- Country -->
        <div class="mb-3">
            <label for="country" class="form-label">Country</label>
            <InputText id="country" class="form-control" @bind="checkoutInfo.Country" />
            <span class="text-danger" asp-validation-for="orderInfo.Country"></span>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary">Finalize Order</button>
    </EditForm>

    @if (isOrderSubmitted)
    {
        <div class="alert alert-success mt-3" role="alert">
            Thank you for your order! This is just a demo, and no real purchase was made.
        </div>
    }
</div>

@code {
    private OrderInfo orderInfo = new OrderInfo();
    private bool isOrderSubmitted = false;

    private async Task HandleCheckout()
    {
        // Simulate checkout process
        await Task.Delay(500); // Mocking some delay
        isOrderSubmitted = true;
    }   
}


